{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/blog-comment.service\";\nimport * as i2 from \"src/app/services/account.service\";\nexport let CommentSystemComponent = /*#__PURE__*/(() => {\n  class CommentSystemComponent {\n    constructor(blogCommentService, accountService) {\n      this.blogCommentService = blogCommentService;\n      this.accountService = accountService;\n    }\n\n    ngOnInit() {\n      this.blogCommentService.getAll(this.blogId).subscribe(blogComments => {\n        if (this.accountService.isLoggedIn()) {\n          this.initComment(this.accountService.currentUserValue.username);\n        }\n\n        this.blogComments = blogComments;\n        this.blogCommentViewModels = [];\n\n        for (let i = 0; i < this.blogComments.length; i++) {\n          if (!this.blogComments[i].parentBlogCommentId) {\n            this.findCommentReplies(this.blogCommentViewModels, i);\n          }\n        }\n      });\n    }\n\n    initComment(username) {\n      this.standAloneComment = {\n        _parentBlogCommentId: null,\n\n        get parentBlogCommentId() {\n          return this._parentBlogCommentId;\n        },\n\n        set parentBlogCommentId(value) {\n          this._parentBlogCommentId = value;\n        },\n\n        content: '',\n        blogId: this.blogId,\n        blogCommentId: -1,\n        username: username,\n        publishDate: null,\n        updateDate: null,\n        isEditable: false,\n        deleteConfirm: false,\n        isReplying: false,\n        comments: []\n      };\n    }\n\n    findCommentReplies(blogCommentViewModels, index) {\n      let firstElement = this.blogComments[index];\n      let newComments = [];\n      let commentViewModel = {\n        parentBlogCommentId: firstElement.parentBlogCommentId || null,\n        content: firstElement.content,\n        blogId: firstElement.blogId,\n        blogCommentId: firstElement.blogCommentId,\n        username: firstElement.username,\n        publishDate: firstElement.publishDate,\n        updateDate: firstElement.updateDate,\n        isEditable: false,\n        deleteConfirm: false,\n        isReplying: false,\n        comments: newComments\n      };\n      blogCommentViewModels.push(commentViewModel);\n\n      for (let i = 0; i < this.blogComments.length; i++) {\n        if (this.blogComments[i].parentBlogCommentId === firstElement.blogCommentId) {\n          this.findCommentReplies(newComments, i);\n        }\n      }\n    }\n\n    onCommentSaved(blogComment) {\n      let commentViewModel = {\n        parentBlogCommentId: blogComment.parentBlogCommentId,\n        content: blogComment.content,\n        blogId: blogComment.blogId,\n        blogCommentId: blogComment.blogCommentId,\n        username: blogComment.username,\n        publishDate: blogComment.publishDate,\n        updateDate: blogComment.updateDate,\n        isEditable: false,\n        deleteConfirm: false,\n        isReplying: false,\n        comments: []\n      };\n      this.blogCommentViewModels.unshift(commentViewModel);\n    }\n\n  }\n\n  CommentSystemComponent.ɵfac = function CommentSystemComponent_Factory(t) {\n    return new (t || CommentSystemComponent)(i0.ɵɵdirectiveInject(i1.BlogCommentService), i0.ɵɵdirectiveInject(i2.AccountService));\n  };\n\n  CommentSystemComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CommentSystemComponent,\n    selectors: [[\"app-comment-system\"]],\n    inputs: {\n      blogId: \"blogId\"\n    },\n    decls: 2,\n    vars: 0,\n    template: function CommentSystemComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"comment-system works!\");\n        i0.ɵɵelementEnd();\n      }\n    }\n  });\n  return CommentSystemComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}