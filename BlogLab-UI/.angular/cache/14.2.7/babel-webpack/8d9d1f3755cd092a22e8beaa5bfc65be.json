{"ast":null,"code":"import { ElementRef } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/photo.service\";\nimport * as i2 from \"ngx-toastr\";\nconst _c0 = [\"photoForm\"];\nconst _c1 = [\"photoUploadElement\"];\nexport let PhotoAlbumComponent = /*#__PURE__*/(() => {\n  class PhotoAlbumComponent {\n    constructor(photoService, toastr) {\n      this.photoService = photoService;\n      this.toastr = toastr;\n      this.photos = [];\n    }\n\n    ngOnInit() {\n      this.photoService.getByApplicationUserId().subscribe(userPhotos => {\n        this.photos = userPhotos;\n      });\n    }\n\n    confirmDelete(photo) {\n      photo.deleteConfirm = true;\n    }\n\n    cancelDeleteConfirm(photo) {\n      photo.deleteConfirm = false;\n    }\n\n    deleteConfirmed(photo) {\n      this.photoService.delete(photo.photoId).subscribe(() => {\n        let index = 0;\n\n        for (let i = 0; i < this.photos.length; i++) {\n          if (this.photos[i].photoId === photo.photoId) {\n            index = i;\n          }\n        }\n\n        if (index > -1) {\n          this.photos.splice(index, 1);\n        }\n\n        this.toastr.info(\"Photo deleted.\");\n      });\n    }\n\n    onFileChange(event) {\n      if (event.target.files.length > 0) {\n        const file = event.target.files[0];\n        this.photoFile = file;\n      }\n    }\n\n    onSubmit() {\n      const formData = new FormData();\n      formData.append('file', this.photoFile, this.newPhotoDescription);\n      this.photoService.create(formData).subscribe(createdPhoto => {\n        this.photoForm.reset();\n        this.photoUploadElement.nativeElement.value = '';\n        this.toastr.info(\"Photo uploaded\");\n        this.photos.unshift(createdPhoto);\n      });\n    }\n\n  }\n\n  PhotoAlbumComponent.ɵfac = function PhotoAlbumComponent_Factory(t) {\n    return new (t || PhotoAlbumComponent)(i0.ɵɵdirectiveInject(i1.PhotoService), i0.ɵɵdirectiveInject(i2.ToastrService));\n  };\n\n  PhotoAlbumComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PhotoAlbumComponent,\n    selectors: [[\"app-photo-album\"]],\n    viewQuery: function PhotoAlbumComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.photoForm = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.photoUploadElement = _t.first);\n      }\n    },\n    decls: 2,\n    vars: 0,\n    template: function PhotoAlbumComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"photo-album works!\");\n        i0.ɵɵelementEnd();\n      }\n    }\n  });\n  return PhotoAlbumComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}